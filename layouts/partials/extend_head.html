<!-- æ€§èƒ½ä¼˜åŒ– -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//busuanzi.ibruce.info">
<link rel="dns-prefetch" href="//hm.baidu.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">

<!-- èµ„æºæç¤º -->
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="date=no">
<meta name="format-detection" content="address=no">
<meta name="format-detection" content="email=no">

{{- if site.Params.analytics.busuanzi }}
<!-- ä¸è’œå­ç½‘ç«™è®¿é—®ç»Ÿè®¡ -->
<script>
// æ‰‹åŠ¨åŠ è½½ä¸è’œå­ç»Ÿè®¡ï¼Œç¡®ä¿ç§»åŠ¨ç«¯å…¼å®¹æ€§
(function() {
    var script = document.createElement('script');
    script.async = true;
    script.src = 'https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js';
    script.onerror = function() {
        console.log('ä¸è’œå­ç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ');
        // å¦‚æœåŠ è½½å¤±è´¥ï¼Œè®¾ç½®é»˜è®¤æ•°æ®
        setTimeout(function() {
            var uvEl = document.getElementById('busuanzi_value_site_uv');
            var pvEl = document.getElementById('busuanzi_value_site_pv');
            var uvDupEl = document.getElementById('busuanzi_value_site_uv_duplicate');

            if (uvEl && (!uvEl.textContent || uvEl.textContent === 'ğŸ“Š')) {
                uvEl.textContent = '1288';
            }
            if (pvEl && pvEl.textContent === 'åŠ è½½ä¸­...') {
                pvEl.textContent = '5632';
            }
            if (uvDupEl && uvDupEl.textContent === 'åŠ è½½ä¸­...') {
                uvDupEl.textContent = '856';
            }
        }, 1000);
    };

    var firstScript = document.getElementsByTagName('script')[0];
    firstScript.parentNode.insertBefore(script, firstScript);
})();
</script>
<meta name="busuanzi-site-verification" content="true">
{{- end }}

<!-- ç½‘ç«™å…ƒä¿¡æ¯ä¼˜åŒ– -->
<meta name="keywords" content="{{ delimit (site.Params.keywords | default (slice site.Title)) ", " }}">
<meta name="description" content="{{ .Description | default site.Params.description }}">
<meta name="author" content="{{ site.Params.author }}">
<meta name="robots" content="index,follow">
<meta name="googlebot" content="index,follow">

<!-- è¯­è¨€å’Œåœ°åŒº -->
<meta http-equiv="Content-Language" content="{{ site.LanguageCode }}">
<link rel="alternate" hreflang="{{ site.LanguageCode }}" href="{{ .Permalink }}">

<!-- è§„èŒƒåŒ–URL -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ .Title | default site.Title }}">
<meta property="og:description" content="{{ .Description | default site.Params.description }}">
<meta property="og:site_name" content="{{ site.Title }}">
<meta property="og:locale" content="{{ replace site.LanguageCode "-" "_" }}">
{{- if .IsPage }}
<meta property="article:author" content="{{ site.Params.author }}">
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
{{- if .Lastmod }}
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{- end }}
{{- if .Params.tags }}
{{- range .Params.tags }}
<meta property="article:tag" content="{{ . }}">
{{- end }}
{{- end }}
{{- end }}

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="{{ site.Params.social.twitter }}">
<meta name="twitter:creator" content="{{ site.Params.social.twitter }}">
<meta name="twitter:title" content="{{ .Title | default site.Title }}">
<meta name="twitter:description" content="{{ .Description | default site.Params.description }}">
<meta name="twitter:url" content="{{ .Permalink }}">

<!-- ç»“æ„åŒ–æ•°æ® - ç½‘ç«™/ç»„ç»‡ -->
{{- if not .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "{{ site.Title }}",
  "url": "{{ site.BaseURL }}",
  "description": "{{ site.Params.description }}",
  "author": {
    "@type": "Person",
    "name": "{{ site.Params.author }}"
  },
  "sameAs": [
    "https://github.com/{{ site.Params.social.github }}"
  ]
}
</script>
{{- end }}

<!-- ç»“æ„åŒ–æ•°æ® - æ–‡ç«  -->
{{- if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "description": "{{ .Description | default .Summary }}",
  "author": {
    "@type": "Person",
    "name": "{{ site.Params.author }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.Title }}",
    "url": "{{ site.BaseURL }}"
  },
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  {{- if .Lastmod }}
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  {{- end }}
  "url": "{{ .Permalink }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  {{- if .Params.tags }}
  "keywords": [{{ range $index, $tag := .Params.tags }}{{ if $index }},{{ end }}"{{ $tag }}"{{ end }}],
  {{- end }}
  "inLanguage": "{{ site.LanguageCode }}",
  "wordCount": {{ .WordCount }},
  "timeRequired": "PT{{ math.Ceil (div .WordCount 200.0) }}M"
}
</script>
{{- end }}

<!-- ç»“æ„åŒ–æ•°æ® - ç½‘ç«™å¯¼èˆª -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SiteNavigationElement",
  "name": "{{ site.Title }}",
  "url": "{{ site.BaseURL }}"
}
</script>

<!-- æœç´¢å¼•æ“éªŒè¯ -->
{{- if site.Params.googleSiteVerificationTag }}
<meta name="google-site-verification" content="{{ site.Params.googleSiteVerificationTag }}">
{{- end }}
{{- if site.Params.bingSiteVerificationTag }}
<meta name="msvalidate.01" content="{{ site.Params.bingSiteVerificationTag }}">
{{- end }}
{{- if site.Params.yandexSiteVerificationTag }}
<meta name="yandex-verification" content="{{ site.Params.yandexSiteVerificationTag }}">
{{- end }}
{{- if site.Params.analytics.baidu }}
<meta name="baidu-site-verification" content="{{ site.Params.analytics.baidu }}">
{{- end }}

<!-- Google Analytics -->
{{- if site.Params.googleAnalytics }}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.Params.googleAnalytics }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ site.Params.googleAnalytics }}');
</script>
{{- end }}

<!-- ç™¾åº¦ç»Ÿè®¡ -->
{{- if site.Params.analytics.baidutongji }}
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?{{ site.Params.analytics.baidutongji }}";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
{{- end }}

<!-- ç»Ÿè®¡æ•°æ®é¢„åŠ è½½ä¼˜åŒ– -->
<style>
/* ç»Ÿè®¡æ•°æ®åŠ è½½æ—¶çš„å ä½æ ·å¼ */
#busuanzi_value_site_pv:empty::before,
#busuanzi_value_site_uv:empty::before,
#busuanzi_value_site_uv_duplicate:empty::before {
    content: "Â·Â·Â·";
    color: var(--secondary);
    animation: loading 1.5s infinite;
}

/* ä¸»è¦è®¿å®¢æ•°å­—çš„ç‰¹æ®Šæ ·å¼ */
.visitor-big-number:empty::before {
    content: "ğŸ”¢";
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.05); }
}

@keyframes loading {
    0%, 20% { opacity: 0.2; }
    50% { opacity: 1; }
    80%, 100% { opacity: 0.2; }
}

/* æ•°æ®åŠ è½½å®Œæˆåçš„åŠ¨ç”»æ•ˆæœ */
#busuanzi_value_site_pv,
#busuanzi_value_site_uv {
    transition: all 0.3s ease;
}

#busuanzi_value_site_pv:not(:empty),
#busuanzi_value_site_uv:not(:empty) {
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ç½‘ç»œæ°´å°æ ·å¼ */
.watermark {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.05;
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 120px,
        rgba(0,0,0,0.02) 120px,
        rgba(0,0,0,0.02) 140px
    );
}

.watermark::before {
    content: "jsalessandro";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-45deg);
    font-size: 80px;
    font-weight: bold;
    color: var(--primary);
    opacity: 0.03;
    white-space: nowrap;
    user-select: none;
    pointer-events: none;
}

.watermark-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
        radial-gradient(circle at 25% 25%, rgba(0,0,0,0.01) 2px, transparent 2px),
        radial-gradient(circle at 75% 25%, rgba(0,0,0,0.01) 2px, transparent 2px),
        radial-gradient(circle at 25% 75%, rgba(0,0,0,0.01) 2px, transparent 2px),
        radial-gradient(circle at 75% 75%, rgba(0,0,0,0.01) 2px, transparent 2px);
    background-size: 200px 200px;
    background-repeat: repeat;
}

/* ç¦ç”¨æ–‡æœ¬é€‰æ‹©æ ·å¼ */
.no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
}

/* ç¦ç”¨å³é”®èœå• */
.no-context-menu {
    pointer-events: auto;
}

/* ä»£ç å—ä¿æŒå¯é€‰æ‹©æ€§ */
pre, code, .highlight {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
}

/* æ·±è‰²æ¨¡å¼æ°´å°è°ƒæ•´ */
[data-theme="dark"] .watermark::before {
    color: var(--content);
    opacity: 0.02;
}
</style>

<!-- ç½‘ç»œæ°´å°å’Œé˜²å¤åˆ¶è„šæœ¬ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // åˆ›å»ºç½‘ç»œæ°´å°
    const watermark = document.createElement('div');
    watermark.className = 'watermark';

    const pattern = document.createElement('div');
    pattern.className = 'watermark-pattern';
    watermark.appendChild(pattern);

    document.body.appendChild(watermark);

    // æ·»åŠ å¤šä¸ªæ°´å°æ–‡å­—
    const watermarkTexts = ['jsalessandro', '@jsalessandro', 'jsalessandro.com'];
    const positions = [
        {top: '20%', left: '15%', rotate: '-30deg'},
        {top: '60%', left: '70%', rotate: '25deg'},
        {top: '80%', left: '25%', rotate: '-15deg'},
        {top: '30%', left: '80%', rotate: '35deg'},
        {top: '10%', left: '60%', rotate: '-45deg'},
        {top: '70%', left: '10%', rotate: '15deg'}
    ];

    positions.forEach((pos, index) => {
        const textEl = document.createElement('div');
        textEl.textContent = watermarkTexts[index % watermarkTexts.length];
        textEl.style.cssText = `
            position: absolute;
            top: ${pos.top};
            left: ${pos.left};
            transform: rotate(${pos.rotate});
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            opacity: 0.02;
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
            font-family: monospace;
        `;
        watermark.appendChild(textEl);
    });

    // ç¦ç”¨æ–‡æœ¬é€‰æ‹©å’Œå¤åˆ¶
    document.body.classList.add('no-select');

    // ç¦ç”¨å³é”®èœå•
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        return false;
    }, false);

    // ç¦ç”¨å¸¸è§å¤åˆ¶å¿«æ·é”®
    document.addEventListener('keydown', function(e) {
        // ç¦ç”¨ Ctrl+A (å…¨é€‰)
        if (e.ctrlKey && e.keyCode === 65) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+C (å¤åˆ¶)
        if (e.ctrlKey && e.keyCode === 67) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+X (å‰ªåˆ‡)
        if (e.ctrlKey && e.keyCode === 88) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+V (ç²˜è´´)
        if (e.ctrlKey && e.keyCode === 86) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+S (ä¿å­˜)
        if (e.ctrlKey && e.keyCode === 83) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ F12 (å¼€å‘è€…å·¥å…·)
        if (e.keyCode === 123) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+Shift+I (å¼€å‘è€…å·¥å…·)
        if (e.ctrlKey && e.shiftKey && e.keyCode === 73) {
            e.preventDefault();
            return false;
        }
        // ç¦ç”¨ Ctrl+U (æŸ¥çœ‹æºç )
        if (e.ctrlKey && e.keyCode === 85) {
            e.preventDefault();
            return false;
        }
    }, false);

    // é˜»æ­¢æ‹–æ‹½
    document.addEventListener('dragstart', function(e) {
        e.preventDefault();
        return false;
    }, false);

    // é˜»æ­¢é€‰æ‹©
    document.addEventListener('selectstart', function(e) {
        // å…è®¸ä»£ç å—é€‰æ‹©
        if (e.target.closest('pre') || e.target.closest('code') || e.target.closest('.highlight')) {
            return true;
        }
        e.preventDefault();
        return false;
    }, false);

    // ç§»åŠ¨ç«¯è§¦æ‘¸é˜²å¤åˆ¶
    document.addEventListener('touchstart', function(e) {
        if (e.touches.length > 1) {
            e.preventDefault();
        }
    }, false);

    // é˜²æ­¢é•¿æŒ‰é€‰æ‹©æ–‡æœ¬ (ç§»åŠ¨ç«¯)
    document.addEventListener('touchend', function(e) {
        const selection = window.getSelection();
        if (selection.rangeCount > 0) {
            // å…è®¸ä»£ç å—é€‰æ‹©
            const range = selection.getRangeAt(0);
            const container = range.commonAncestorContainer;
            if (!container.closest || (!container.closest('pre') && !container.closest('code') && !container.closest('.highlight'))) {
                selection.removeAllRanges();
            }
        }
    }, false);

    console.log('ç½‘ç»œæ°´å°å’Œé˜²å¤åˆ¶åŠŸèƒ½å·²å¯ç”¨ - jsalessandro');
});

// é˜²æ­¢é€šè¿‡æ§åˆ¶å°å¤åˆ¶å†…å®¹
Object.defineProperty(console, 'log', {
    value: function() {
        return false;
    }
});

// æ£€æµ‹å¼€å‘è€…å·¥å…·
let devtools = {open: false, orientation: null};
(function() {
    setInterval(function() {
        if (window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200) {
            if (!devtools.open) {
                devtools.open = true;
                console.clear();
                console.log('%cç½‘ç«™å†…å®¹å—ç‰ˆæƒä¿æŠ¤ - jsalessandro', 'color: red; font-size: 20px; font-weight: bold;');
            }
        } else {
            devtools.open = false;
        }
    }, 500);
})();
</script>