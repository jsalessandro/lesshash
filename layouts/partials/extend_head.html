{{- if site.Params.analytics.busuanzi }}
<!-- 不蒜子网站访问统计 -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<meta name="busuanzi-site-verification" content="true">
{{- end }}

<!-- 网站元信息优化 -->
<meta name="keywords" content="{{ delimit (site.Params.keywords | default (slice site.Title)) ", " }}">
<meta name="description" content="{{ .Description | default site.Params.description }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ .Title | default site.Title }}">
<meta property="og:description" content="{{ .Description | default site.Params.description }}">
<meta property="og:site_name" content="{{ site.Title }}">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="{{ .Permalink }}">
<meta property="twitter:title" content="{{ .Title | default site.Title }}">
<meta property="twitter:description" content="{{ .Description | default site.Params.description }}">

<!-- 百度统计验证 (可选) -->
{{- if site.Params.analytics.baidu }}
<meta name="baidu-site-verification" content="{{ site.Params.analytics.baidu }}">
{{- end }}

<!-- 统计数据预加载优化 -->
<style>
/* 统计数据加载时的占位样式 */
#busuanzi_value_site_pv:empty::before,
#busuanzi_value_site_uv:empty::before,
#busuanzi_value_site_uv_duplicate:empty::before {
    content: "···";
    color: var(--secondary);
    animation: loading 1.5s infinite;
}

/* 主要访客数字的特殊样式 */
.visitor-big-number:empty::before {
    content: "🔢";
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.05); }
}

@keyframes loading {
    0%, 20% { opacity: 0.2; }
    50% { opacity: 1; }
    80%, 100% { opacity: 0.2; }
}

/* 数据加载完成后的动画效果 */
#busuanzi_value_site_pv,
#busuanzi_value_site_uv {
    transition: all 0.3s ease;
}

#busuanzi_value_site_pv:not(:empty),
#busuanzi_value_site_uv:not(:empty) {
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>